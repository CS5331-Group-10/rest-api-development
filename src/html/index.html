{% extends "base.html" %}
        {% block body %}
	
	<div class="container jumbo-container">
  		<div class="jumbotron">
    		<h1>My Secret Diary</h1>      
    		<p>See everyone's diary here.</p>
  		</div>
	</div>
   	<div class="container">

		
		
{%for post in posts%}

<div class="card" style="width: 100%;">
		  <div class="card-body">
		    <h5 class="card-title">{{post.title}}</h5>
		    <h6 class="card-subtitle mb-2 text-muted">By:{{post.author}}<br>On:{{post.publish_date}}</h6>
		    <p class="card-text">{{post.text}}</p>
		    <a href="#" class="card-link" data-toggle="modal" data-target={{"#" + post.id|string()}}>Read more</a>
		  </div>
		</div>
		
<div class="modal fade" id="{{post.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">{{post.title}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
	<p>Published by:{{post.author}}, On:{{post.publish_date}}</p>
       <p>{{post.text}}</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<br>
{%endfor%}

{%if session['token'] %}
<p> Below is user's private diaries</p>
{%for user_post in user_posts%}

<div class="card" style="width: 100%;">
		  <div class="card-body">
		    <h5 class="card-title">{{user_post.title}}</h5>
		    <h6 class="card-subtitle mb-2 text-muted">By:{{user_post.author}}<br> On:{{user_post.publish_date}}
			<form method="POST">
				<button type="button" class="btn btn-default btn-sm" style="float:right; position:relative; margin-left:5px;">
					<span class="fa fa-trash"></span>
				</button>
			</form>
			{%if user_post.public==0 %}
			<form method="POST">
				<button type="button" class="btn btn-default btn-sm" style="float:right; position:relative">
					<span class="fa fa-eye" ></span>
				</button>
			</form>
			{% else %}
			<form method="POST">
				<button type="button" class="btn btn-default btn-sm" style="float:right;position:relative">
					<span class="fa fa-eye-slash"></span>
				</button>
			</form>
			{%endif%}
			
			</h6>
		
		    <p class="card-text">{{user_post.text}}</p>
		    <a href="#" class="card-link flush-left" data-toggle="modal" data-target={{"#" + user_post.id|string()}}>Read more</a>
				
		    	
		  </div>
		</div>
		
<div class="modal fade" id="{{user_post.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">{{user_post.title}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
	<p>Published by:{{user_post.author}}, On:{{user_post.publish_date}}</p>
       <p>{{user_post.text}}</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<br>
{%endfor%}

{%endif%}

		<p>Requirements for the front end are as follows:</p>
		<ul>
		    <!-- {% block content %}{% endblock %} -->
		    <li>Display all public diary entries</li>
		    <li>Display an authenticated user's diary entries</li>
		    <li>Create a new diary entry</li>
		    <li>Delete an existing diary entry</li>
		    <li>Toggle the permissions on an existing diary entry</li>
		</ul>

		<!-- the following is a demo on how you may display data retrieved from
		     the API
		-->
		<div id="demo_heartbeat">
		</div>
		<div id="demo_members">
		</div>
		<div id="demo_short_answer_questions">weeee
		</div>
	</div>
	 <script src="{{url_for('static', filename='demo.js')}}"></script>
     
        {% endblock %}

	
 		

</html>
